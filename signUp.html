<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./styles.css" />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <title>Form</title>
  </head>
  <body>
    <section class="container forms" id="signUp">
      <div class="form login signupForm">
        <header class="form-content">Sign Up</header>
        <form id="signupForm" action="#">
          <div class="field input-field">
            <input
              type="text"
              placeholder="First Name"
              class="input"
              id="firstName"
            />
          </div>

          <div class="field input-field">
            <input
              type="text"
              placeholder="Last Name"
              class="input"
              id="lastName"
            />
          </div>

          <div class="field input-field">
            <input
              type="email"
              placeholder="Email"
              class="input"
              id="signupEmail"
            />
          </div>

          <div class="field input-field">
            <input
              type="password"
              placeholder="Password"
              class="password"
              id="signupPassword"
            />
            <i class="bx bxs-hide eye-icon"></i>
          </div>

          <div class="field input-field" id="address">
            <input
              type="text"
              id="phoneNumber"
              placeholder="Address"
              class="password"
            />
          </div>

          <div class="field input-field">
            <input type="text" placeholder="Phone Number" class="password" />
          </div>

          <div
            class="input-field field"
            style="background-color: white"
            id="address"
          >
            <input
              type="file"
              accept="image/*"
              id="image"
              placeholder="Address"
              class="image"
            />
          </div>

          <!-- Camera setup for picture using webcam.js -->
          <div id="camera"></div>
          <button onclick="takePic()">Take Picture</button>

          <div class="btn-wrapper">
            <div>
              <button onclick="addSignUpData()" class="field button-field">
                Sign Up
              </button>
            </div>

            <div class="form-link link">
              <span>Already have an account?</span>
              <a href="./index.html">Log In</a>
            </div>
          </div>
        </form>
      </div>
    </section>

    <script src="form.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/webcamjs/1.0.26/webcam.min.js"
    ></script>

    <script>
      Webcam.set({
        width: "100%",
        height: 240,
        image_format: "jpeg",
        jpeg_quality: 90,
      });
      Webcam.attach("#camera");

      function takePic() {
        Webcam.snap(function (data_uri) {
          let blob = dataURItoBlob(data_uri);
          saveBlobToLocalstorage(blob);
        });
      }
      // Function to convert data URI to Blob

      function dataURItoBlob(dataURI) {
        let byteString = atob(dataURI.split(",")[1]);
        let mimeString = dataURI.split(",")[0].split(":")[1].split(";")[0];
        let ab = new ArrayBuffer(byteString.length);
        let ia = new Uint8Array(ab);

        for (var i = 0; i < byteString.length; i++) {
          ia[i] = byteString.charCodeAt(i);
        }

        return new Blob([ab], { type: mimeString });
      }

      // Function to save Blob in local storage

      function saveBlobToLocalstorage(blob) {
        let blobUrl = URL.createObjectURL(blob);
        // Store the Blob URL in local storage
        localStorage.setItem("imageBlobUrl", blobUrl);
      }
    </script>
  </body>
</html>
